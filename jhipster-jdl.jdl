
entity Transcript {
    ensemblTranscriptId String,
    canonical Boolean required,
    ensemblProteinId String,
    referenceSequenceId String,
    description String
}

entity EnsemblGene {
    referenceGenome String required,
    ensemblGeneId String required,
    canonical Boolean required,
    chromosome String required,
    start Integer required,
    end Integer required,
    strand Integer required
}

entity GenomeFragment {
    chromosome String,
    start Integer,
    end Integer,
    strand Integer,
    type GenomeFragmentType
}

enum GenomeFragmentType {
	GENE,
	EXON,
    FIVE_PRIME_UTR,
    THREE_PRIME_UTR
}

entity Sequence {
    sequenceType SequenceType
    sequence TextBlob
}

enum SequenceType {
	PROTEIN, CDNA
}

entity Drug {
    name TextBlob
    code String
    semanticType TextBlob
}

entity DrugSynonym {
    name TextBlob
}

entity Info {
    type InfoType unique required
    value String
    lastUpdated Instant
}

enum InfoType {
    NCIT_VERSION,
    GENE_LAST_UPDATED
}

entity Article {
    pmid String,
    title TextBlob,
    journal String,
    pubDate String,
    volume String,
    issue String,
    pages String,
    authors String,
}

entity Gene {
    entrezGeneId Integer
    hugoSymbol String
}

entity GeneAlias {
    name String
}

entity SpecimenType{
	type String required
    name String required
}

entity CompanionDiagnosticDevice {
	name String required
    manufacturer String required
}

enum FdaSubmissionTypeKey {
	PMA, DE_NOVO, HDE, PMN
}

entity FdaSubmissionType {
	type FdaSubmissionTypeKey required
    name String required
    shortName String
    description TextBlob
}

entity FdaSubmission {
    number String required
    supplementNumber String

	deviceName String
    genericName String

    dateReceived Instant
    decisionDate Instant

    description TextBlob

    curated Boolean required
    genetic Boolean required
}

enum TumorForm {
	SOLID, LIQUID, MIXED
}

enum AlterationType {
	MUTATION, COPY_NUMBER_ALTERATION, STRUCTURAL_VARIANT, UNKNOWN
}

enum CopyNumberAlterationType {
	AMPLIFICATION,
    DELETION,
    GAIN,
    LOSS
}

enum StructuralVariantType {
	FUSION
}

entity VariantConsequence {
	term String required
    isGenerallyTruncating Boolean required
    description String
}

entity Alteration {
	type AlterationType required
    name String required
    alteration String required
    proteinStart Integer
    proteinEnd Integer
    refResidues String
    variantResidues String
}

entity CancerType {
	code String
    color String
    level Integer required
    mainType String required
    subtype String
    tissue String
    tumorForm TumorForm required
}

enum GeographicRegion {
	US, EU
}

entity DrugBrand {
	name String
    region GeographicRegion
}

entity DeviceUsageIndication {
}

relationship OneToMany {
	Drug{synonyms} to DrugSynonym
	Gene to GeneAlias
	Gene to EnsemblGene
    CancerType{children} to CancerType {parent}
    Transcript{fragments} to GenomeFragment{transcript}
    EnsemblGene to Transcript
    Transcript to Sequence
    CompanionDiagnosticDevice to FdaSubmission
    VariantConsequence to Alteration{consequence}
    FdaSubmissionType to FdaSubmission{type}
    FdaSubmission to DeviceUsageIndication
	Alteration to DeviceUsageIndication
	CancerType to DeviceUsageIndication
	Drug to DeviceUsageIndication
    Drug{brands} to DrugBrand
}

relationship ManyToMany {
    Gene to Alteration
    CompanionDiagnosticDevice to SpecimenType
}

paginate Gene, EnsemblGene, Alteration, CancerType, Transcript, Sequence, GenomeFragment, Article, Drug, FdaSubmission with pagination

service * with serviceClass
dto Transcript with mapstruct
